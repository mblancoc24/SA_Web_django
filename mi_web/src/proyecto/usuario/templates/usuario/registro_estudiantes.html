{% extends 'usuario/principal.html' %}
{% load static %}
{% block content %}
{% block extraJavaScript %}
<script src="{% static 'js/validacion.js' %}"></script>
<script src="{% static 'js/function.js' %}"></script>
{% endblock %}
<div class="row">
  <div class="col-md-10 mx-auto ">
    <div class="card border-0 cardPerfilCol rounded-3 my-5">
      <div class="card-body p-4 p-sm-5 p-2 bg-light bg-gradient">
        <h5 class="card-title text-center mb-4 fw-light fs-5 fw-bold">Registro Estudiantil</h5>
        {% if form.errors %}
        <div class="alert alert-danger" role="alert">
            {% for field, errors in form.errors.items %}
            <ul class="mb-0">
                {% for error in errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
            {% endfor %}
        </div>
        {% endif %}
        <form class="row g-3" method="POST">
          {% csrf_token %}
          <div class="row mt-3">
            <ul class="tab-list nav nav-pills justify-content-center">
              <li class="nav-item tab-list__item">
                <a class="next-step step-tab1 tab-list__link nav-link active" data-bs-toggle="pill" href="#datosP">Datos
                  Personal</a>
              </li>
              <li class="nav-item tab-list__item">
                <a class="next-step step-tab1 tab-list__link nav-link " id="direccionUl" data-bs-toggle="pill"
                  href="#direccionP">Dirección</a>
              </li>
              <li class="nav-item tab-list__item">
                <a class="next-step step-tab1 tab-list__link nav-link " id="correoUl" data-bs-toggle="pill"
                  href="#correoP">Correo</a>
              </li>
              <li class="nav-item tab-list__item">
                <a class="next-step step-tab1 tab-list__link nav-link " onclick="llamarFunciones()" id="validarUl"
                  data-bs-toggle="pill" href="#validarP">Validar</a>
              </li>
            </ul>
          </div>
          <div class="tab-content mt-4">
            <div class="tab-pane container fade show active" id="datosP">
              <div class="row">
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 mb-3">
                  <select id="tipo" class="form-select" onchange="change();">
                    <option style="opacity: .65;" value="" disabled selected hidden>Tipo de identificación
                    </option>
                    <option value="Cédula">Cédula Física</option>
                    <option value="Dimex">DIMEX</option>
                    <option value="Pasaporte">Pasaporte</option>
                    <option value="Cédula Residente">Cédula Residente</option>
                    <option value="Permiso">Permiso de Trabajo</option>
                    <option value="Refugiado">Refugiado</option>
                  </select>
                </div>
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-6 col-lg-6">
                  <div class="input-group">
                    <span class="input-group-text d-flex justify-content-center fas fa-regular fa-address-card fa-lg"
                      id="basic-addon1"></span>
                    <input type="text" class="form-control" id="identificacion" placeholder="Identificación"
                      name="username" onkeyup="datacedula()" disabled required>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4">
                  <div class="input-group">
                    <span class="input-group-text d-flex justify-content-center fas fa-regular fa-user-plus fa-lg"
                      id="basic-addon1"></span>
                    <input type="text" class="form-control" id="nombre" placeholder="Nombre" name="first_name" readonly
                      required>
                  </div>
                </div>
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4">
                  <div class="input-group">
                    <span class="input-group-text d-flex justify-content-center fas fa-regular fa-user-plus fa-lg"
                      id="basic-addon1"></span>
                    <input type="text" class="form-control" id="primerapellido" placeholder="Primer Apellido"
                      name="last_name" readonly required>
                  </div>
                </div>
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4">
                  <div class="input-group">
                    <span class="input-group-text d-flex justify-content-center fas fa-regular fa-user-plus fa-lg"
                      id="basic-addon1"></span>
                    <input type="text" class="form-control" id="segundoapellido" placeholder="Segundo Apellido"
                      name="segundoapellido" readonly required>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="form-floating  mb-3 col-12 col-sm-12 col-md-6 col-lg-6" id="dis_nacimiento"
                  style="display: block;">
                  <div class="input-group">
                    <span class="input-group-text fas fa-solid fa-calendar-days fa-lg d-flex justify-content-center"
                      id="basic-addon1"></span>
                    <input class="form-control flatpickr flatpickr-input active" data-id="datetime" id="fechanacimiento"
                      readonly="readonly" placeholder="Fecha de nacimiento. dd/mm/yyyy" name="fechanacimiento" />
                  </div>
                </div>
                <div class="col-12 col-sm-12 col-md-6 col-lg-6 mb-3" id="dis_genero" style="display: block;">
                  <select id="genero" class="form-select" name="Genero_select" data-placeholder="Genero"
                    onchange="checkOtro()">
                    <option style="opacity: 0.65" value="" disabled selected hidden>Genero</option>
                    <option value="femenino">Femenino</option>
                    <option value="masculino">Masculino</option>
                    <option value="no_decirlo">Prefiero no decirlo</option>
                    <option value="otro">Otro</option>
                  </select>
                  <input type="hidden" value="NA" id="otro_trato" name="trato">
                  <input type="hidden" value="NA" id="otro_sexo" name="sexo2">
                </div>
              </div>
              <div class="row">
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_telefono"
                  style="display: block;">
                  <div class="input-group">
                    <i class="fa-solid fa-phone-plus"></i>
                    <span class="input-group-text d-flex justify-content-center fas fa-solid fa-phone fa-lg"
                      id="basic-addon1"></span>
                    <input type="text" class="form-control" id="telefono" placeholder="Número Telefónico"
                      name="telefono">
                  </div>
                </div>
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_telefono2"
                  style="display: block;">
                  <div class="input-group">
                    <span class="input-group-text d-flex justify-content-center fas fa-solid fa-phone fa-lg"
                      id="basic-addon1"></span>
                    <input type="text" class="form-control" id="telefono2" placeholder="Segundo Número Telefónico"
                      name="telefono2">
                  </div>
                </div>
                <div class="col-md-4 mb-3" id="dis_pais" style="display: block;">
                  <select id="pais_select" class="form-select select2" onchange="obtenerPais(this)" name="pais_select"
                    data-placeholder="Seleccione Nacionalidad">
                  </select>
                  <input type="hidden" id="pais" name="pais">
                </div>
              </div>
              <div class="d-flex justify-content-end">
                <a type="button" class="btn btn-md btn-primary btn-login fw-bold fas fa-regular fa-arrow-right disabled"
                  id="botonSiguienteDatosP" onclick="mostrarSiguiente()">
                </a>
              </div>
            </div>
            <div class="tab-pane container fade show" id="direccionP">
              <div class="row">
                <div class="mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_provincia" style="display: block;">
                  <select id="provincia_select" class="form-select" name="provincia_select"
                    data-placeholder="Selecione Provincia" onchange="obtenerProvincia(this)"
                    onclick="cargarProvincias()">
                    <option style="opacity: 0.65" value="" disabled selected hidden>Seleccione Provincia</option>
                  </select>
                  <input type="hidden" id="provincia" name="provincia">
                </div>
                <div class="mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_canton" style="display: block;">
                  <select id="canton_select" class="form-select" name="canton_select"
                    data-placeholder="Selecione Canton" onchange="obtenerCanton(this)">
                    <option style="opacity: 0.65" value="" disabled selected hidden>Seleccione Cantón</option>
                  </select>
                  <input type="hidden" id="canton" name="canton">
                </div>
                <div class="mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_distrito" style="display: block;">
                  <select id="distrito_select" class="form-select" name="distrito_select"
                    data-placeholder="Selecione Distrito" onchange="obtenerDistrito(this)">
                    <option style="opacity: 0.65" value="" disabled selected hidden>Seleccione Distrito</option>
                  </select>
                  <input type="hidden" id="distrito" name="distrito">
                </div>
              </div>
              <div class="row">
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-12 col-lg-12">
                  <div class="input-group">
                    <span class="input-group-text d-flex justify-content-center fas fa-solid fa-address-book fa-xl"
                      id="basic-addon1"></span>
                    <input type="text" class="form-control " id="direccion_exacta" placeholder="Direccion Exacta"
                      name="direccion_exacta" required>
                  </div>
                </div>
              </div>
              <div class="d-flex justify-content-between">
                <a type="button" class="btn btn-md btn-primary btn-login fw-bold fas fa-regular fa-arrow-left"
                  id="botonAnteriorDireccionP" onclick="mostrarAnterior()"></a>
                <a type="button" class="btn btn-md btn-primary btn-login fw-bold fas fa-regular fa-arrow-right disabled"
                  id="botonSiguienteDireccionP" onclick="mostrarSiguiente()"></a>
              </div>
            </div>
            <div class="tab-pane container fade show" id="correoP">
              <div class="row">
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_correo"
                  style="display: block;">
                  <div class="input-group">
                    <span class="input-group-text d-flex justify-content-center fas fa-regular fa-envelope fa-lg"
                      id="basic-addon1"></span>
                    <input type="email" class="form-control" id="correo" placeholder="Correo" name="email" required
                      pattern="(?![_.-])((?![_.-][_.-])[a-zA-Z\d_.-]){0,63}[a-zA-Z\d]@((?!-)((?!--)[a-zA-Z\d-]){0,63}[a-zA-Z\d]\.){1,2}([a-zA-Z]{2,14}\.)?[a-zA-Z]{2,14}">
                  </div>
                </div>
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_contrasena"
                  style="display: block;">
                  <div class="input-group mb-3 input-group-lg align-items-center">
                    <span class="input-group-text d-flex justify-content-center fas fa-lock fa-lg"
                      id="basic-addon1" style="height: 56px;"></span>
                    <input type="password" class="form-control" id="password1" placeholder="Contraseña" name="password1"
                      required>
                      <i class="fas fa-eye-slash eye" id="togglePassword" style="margin-left: -30px; cursor: pointer; z-index: 9999;" onclick="showPassword('password1','.eye');"></i>
                  </div>
                </div>
                <div class="form-floating mb-3 col-12 col-sm-12 col-md-4 col-lg-4" id="dis_confirmar"
                  style="display: block;">
                  <div class="input-group mb-3 input-group-lg align-items-center">
                    <span class="input-group-text d-flex justify-content-center fas fa-lock fa-lg" id="basic-addon1" style="height: 56px;">
                    </span>
                    <input type="password" class="form-control" id="password2" placeholder="Confirmar contraseña"
                      name="password2" required>
                      <i class="fas fa-eye-slash eye2" id="togglePassword2" style="margin-left: -30px; cursor: pointer; z-index: 9999;" onclick="showPassword('password2','.eye2');"></i>
                  </div>

                </div>
                <div class="alert alert-danger mb-3" id="messageDiv" style="display: none;" role="alert">
                  <ul class="mb-0">
                      <li id="message"></li>
                  </ul>
                </div>
              </div>
              <div class="d-flex justify-content-between">
                <a type="button" class="btn btn-md btn-primary btn-login fw-bold fas fa-regular fa-arrow-left"
                  id="botonAnteriorCorreoP" onclick="mostrarAnterior()"></a>
                <a type="button" class="btn btn-md btn-primary btn-login fw-bold fas fa-regular fa-arrow-right disabled"
                  id="botonSiguienteCorreoP" onclick="llamarFunciones()">
                </a>
              </div>
            </div>
            <div class="tab-pane container fade show" id="validarP">
              <div class="row">
                <div class="col-12 col-sm-12 col-md-12 col-lg-12 ">
                  <h5 class="card-title text-center mb-4 fw-light fw-bold">Se envió al correo un código de verificación
                    para registrarse</h5>
                  <div class="d-flex justify-content-center">
                    <div class="mb-3 col-1 col-sm-1 col-md-1 col-lg-1 m-1" id="Código1" style="display: block;">
                      <input type="text" class="form-control" id="input1" maxlength="1" onkeyup="moverInput(event, 2)"
                        required>
                    </div>
                    <div class="mb-3 col-1 col-sm-1 col-md-1 col-lg-1 m-1" id="Código2" style="display: block;">
                      <input type="text" class="form-control" id="input2" maxlength="1" onkeyup="moverInput(event, 3)"
                        required>
                    </div>
                    <div class="mb-3 col-1 col-sm-1 col-md-1 col-lg-1 m-1" id="Código3" style="display: block;">
                      <input type="text" class="form-control" id="input3" maxlength="1" onkeyup="moverInput(event, 4)"
                        required>
                    </div>
                    <div class="mb-3 col-1 col-sm-1 col-md-1 col-lg-1 m-1" id="Código4" style="display: block;">
                      <input type="text" class="form-control" id="input4" maxlength="1" oninput="verificarCodigo()"
                        required>
                    </div>
                  </div>
                </div>
              </div>
              <div class="d-flex flex-row justify-content-between align-items-center">
                <a type="button" class="btn btn-md btn-primary btn-login fw-bold fas fa-regular fa-arrow-left"
                  id="botonAnteriorCorreoP" onclick="mostrarAnterior()"></a>
                <button type="submit" class="btn btn-md btn-primary btn-login fw-bold bi bi-save disabled"
                  id="registrarEstudiante"> Registrar</button>
              </div>
            </div>
          </div>
          <hr class="my-4">
          <div class="d-grid mb-2">
            <span class="ml-auto"> ¿Ya tienes una cuenta? <a href="{% url 'login' %}"
                class="text-info bi bi-box-arrow-in-right"> Ingresar</a></span>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Model de Cambio de data -->
{% block modal_inclusivo%}
<div class="modal fade" id="modal_inclusivo" tabindex="-1" aria-labelledby="modal_inclusivoTitle" style="display: none"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content rounded-4">
      <div class="modal-header">
        <h5 class="modal-title" id="modal_inclusivoTitle">
          INFORMACION EXTRA
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"><span class="icon-close2"></span></span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="form-floating mb-3 col-md-6">
            <div class="input-group">
              <input type="text" class="form-control" id="trato2" placeholder="¿Cuál es tu sexo?" name="trato2"
                style="height: 60px;">
            </div>
          </div>
          <div class="form-floating col-md-6">
            <select id="tipoTrato" class="form-select form-select-sm mb-3">
              <option style="opacity: .65;" value="" disabled selected hidden>Trato
              </option>
              <option value="Mujer">Mujer</option>
              <option value="Hombre">Hombre</option>
              <option value="no_decirlo">Prefiero no decirlo</option>
              <option value="Otro">Otro</option>
            </select>
            <label for="tipo" style="opacity: .65;">Prefiero que me traten como</label>
          </div>
        </div>
        <div class="row d-grid mb-4 d-flex justify-content-center">
          <button type="submit" onclick="continuarGenero()" class="w-100 btn btn-lg btn-primary btn-sm rounded fw-bold"
            style="max-width: 175px;">
            <i class="fa fa-paper-plane" aria-hidden="true"></i> Continuar</button>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock modal_inclusivo %}
<style>
  .select2-selection__rendered {
    line-height: 31px !important;
  }

  .select2-container .select2-selection--single {
    height: 56px !important;
  }

  .select2-selection__arrow {
    height: 34px !important;
  }

  @media (max-width: 319px) {
    .d-flex {
      flex-direction: column;
      align-items: flex-start;
    }
  
    .mb-3 {
      margin-bottom: 10px;
    }
    .watch .mt-5 {
      margin-top: 0 !important;
      /* Anula el margen superior */
    }

    .my-2 {
      margin-top: 0 !important;
    }

    .cardPerfilCol {
      margin-top: 0 !important;
      margin-left: -10px;
      width: 170px;
    }

.input-group{
  width: 115px
}
    #basic-addon1{
      margin-left: -35px;
    }

    .select2-selection__rendered {
      line-height: 31px !important;
    }

    .select2-container .select2-selection--single {
      margin-left: -35px;
      width: 152px !important;
    }

    .select2-selection__arrow {
      height: 34px !important;
    }

    .tab-list {
      margin-left: 15px !important;
    }

    #tipo, #genero, #distrito_select, #provincia_select, #canton_select{
      margin-left: -35px !important;
      width: 150px;
    }
    #registrarEstudiante{
      margin-left: 5px !important;
      font-size: 0;
      width: 50px;
    
    }
    #registrarEstudiante::before {
      display: inline-block;
      font-family: "Font Awesome"; /* Asegúrate de tener la fuente Font Awesome cargada */
      font-size: 20px; /* Ajusta el tamaño del icono según sea necesario */
    }
  }
</style>
<script>
  flatpickr("#fechanacimiento", {
    dateFormat: "d/m/Y",

  });
</script>
{% endblock content %}